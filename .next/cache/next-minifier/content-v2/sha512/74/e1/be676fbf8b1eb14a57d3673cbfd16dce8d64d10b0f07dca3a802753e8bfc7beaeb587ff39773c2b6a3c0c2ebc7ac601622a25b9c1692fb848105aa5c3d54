{"code":"(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[8],{\"7Cbv\":function(t,n,e){\"use strict\";var r,o=new Uint8Array(16);function a(){if(!r&&!(r=\"undefined\"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||\"undefined\"!==typeof msCrypto&&\"function\"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error(\"crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported\");return r(o)}var i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var u=function(t){return\"string\"===typeof t&&i.test(t)},c=[],d=0;d<256;++d)c.push((d+256).toString(16).substr(1));var s=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=(c[t[n+0]]+c[t[n+1]]+c[t[n+2]]+c[t[n+3]]+\"-\"+c[t[n+4]]+c[t[n+5]]+\"-\"+c[t[n+6]]+c[t[n+7]]+\"-\"+c[t[n+8]]+c[t[n+9]]+\"-\"+c[t[n+10]]+c[t[n+11]]+c[t[n+12]]+c[t[n+13]]+c[t[n+14]]+c[t[n+15]]).toLowerCase();if(!u(e))throw TypeError(\"Stringified UUID is invalid\");return e};n.a=function(t,n,e){var r=(t=t||{}).random||(t.rng||a)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,n){e=e||0;for(var o=0;o<16;++o)n[e+o]=r[o];return n}return s(r)}},OXhd:function(t,n,e){\"use strict\";var r=e(\"nKUr\"),o=e(\"ODXe\"),a=e(\"h4VS\"),i=e(\"q1tI\"),u=e(\"VX74\"),c=e(\"w4YB\"),d=e(\"nyHz\"),s=e(\"YFqc\"),l=e.n(s),p=e(\"+xVt\"),m=e(\"7Cbv\");function y(){var t=Object(a.a)([\"\\n  query GET_CART {\\n    cart {\\n      contents {\\n        nodes {\\n          key\\n          product {\\n            id\\n            productId\\n            name\\n            description\\n            type\\n            onSale\\n            slug\\n            averageRating\\n            reviewCount\\n            image {\\n              id\\n                sourceUrl\\n                srcSet\\n                altText\\n                title       \\n            }\\n            galleryImages {\\n              nodes {\\n                id\\n                sourceUrl\\n                srcSet\\n                altText\\n                title   \\n              }\\n            }\\n\\n          }\\n          variation {\\n            id\\n            variationId\\n            name\\n            description\\n            type\\n            onSale\\n            price\\n            regularPrice\\n            salePrice\\n            image {\\n              id\\n              sourceUrl\\n              srcSet\\n              altText\\n              title      \\n            }\\n            attributes {\\n              nodes {\\n                id\\n                name\\n                value\\n              }\\n            }\\n          }\\n          quantity\\n          total\\n          subtotal\\n          subtotalTax\\n        }\\n      }\\n      appliedCoupons {\\n        nodes {\\n          id\\n          couponId\\n          discountType\\n          amount\\n          dateExpiry\\n          products {\\n            nodes {\\n              id\\n            }\\n          }\\n          productCategories {\\n            nodes {\\n              id\\n            }\\n          }\\n        }\\n      }\\n      subtotal\\n      subtotalTax\\n      shippingTax\\n      shippingTotal\\n      total\\n      totalTax\\n      feeTax\\n      feeTotal\\n      discountTax\\n      discountTotal\\n    }\\n  }\\n\"]);return y=function(){return t},t}function f(){var t=Object(a.a)([\"\\n  mutation ($input: AddToCartInput!) {\\n    __typename\\n  addToCart(input: $input) {\\n    clientMutationId\\n    cartItem {\\n      key\\n      product {\\n        id\\n        productId\\n        name\\n        description\\n        type\\n        onSale\\n        slug\\n        averageRating\\n        reviewCount\\n        image {\\n          id\\n          sourceUrl\\n          altText\\n        }\\n        galleryImages {\\n          nodes {\\n            id\\n            sourceUrl\\n            altText\\n          }\\n        }\\n      }\\n      quantity\\n      subtotal\\n      subtotalTax\\n      tax\\n      total\\n      variation{\\n        id\\n        variationId\\n        name\\n        description\\n        type\\n        onSale\\n        price\\n        regularPrice\\n        salePrice\\n        image{\\n          id\\n          sourceUrl\\n          altText\\n        }\\n        attributes{\\n          nodes{\\n            id\\n            attributeId\\n            name\\n            value\\n          }\\n        }\\n      }\\n    }\\n  }\\n  }\\n\"]);return f=function(){return t},t}var g=Object(u.gql)(f()),b=Object(u.gql)(y());n.a=function(t){var n=t.product,e={clientMutationId:Object(m.a)(),productId:n.productId},a=Object(i.useContext)(c.a),s=(a[0],a[1]),y=Object(i.useState)(!1),f=y[0],h=y[1],v=Object(i.useState)(null),x=(v[0],v[1]),I=Object(u.useQuery)(b,{notifyOnNetworkStatusChange:!0,onCompleted:function(){var t=Object(d.c)(j);localStorage.setItem(\"woo-next-cart\",JSON.stringify(t)),s(t)}}),j=(I.loading,I.error,I.data),O=I.refetch,C=Object(u.useMutation)(g,{variables:{input:e},onCompleted:function(){S&&x(S.graphQLErrors[0].message),O(),h(!0)},onError:function(t){t&&x(t.graphQLErrors[0].message)}}),w=Object(o.a)(C,2),P=w[0],T=w[1],q=(T.data,T.loading),S=T.error;return Object(r.jsx)(u.ApolloProvider,{client:p.a,children:Object(r.jsxs)(\"div\",{children:[q&&Object(r.jsx)(\"p\",{children:\"Adding to Cart...\"}),\"ExternalProduct\"===n.__typename?Object(r.jsx)(\"a\",{href:n.externalUrl,target:\"_blank\",className:\"px-3 py-1 rounded-sm mr-3 text-sm border-solid border border-current inline-block hover:bg-purple-600 hover:text-white hover:border-purple-600\",children:\"Buy now\"}):Object(r.jsx)(\"button\",{onClick:function(){x(null),P()},className:\"px-3 py-1 rounded-sm mr-3 text-sm border-solid border border-current hover:bg-purple-600 hover:text-white hover:border-purple-600\",children:\"Add to cart\"}),f?Object(r.jsx)(l.a,{href:\"/cart\",children:Object(r.jsx)(\"button\",{className:\"px-3 py-1 rounded-sm text-sm border-solid border border-current inline-block hover:bg-purple-600 hover:text-white hover:border-purple-600\",children:\"View Cart\"})}):\"\"]})})}},nyHz:function(t,n,e){\"use strict\";e.d(n,\"a\",(function(){return a})),e.d(n,\"e\",(function(){return u})),e.d(n,\"c\",(function(){return s})),e.d(n,\"b\",(function(){return l})),e.d(n,\"d\",(function(){return p}));var r=e(\"7Cbv\"),o=function(t){var n=t.match(/[+-]?\\d+(\\.\\d+)?/g)[0];return null!==n?parseFloat(parseFloat(n).toFixed(2)):\"\"},a=function(t){var n=o(t.price),e={products:[],totalProductsCount:1,totalProductsPrice:n},r=i(t,n,1);return e.products.push(r),localStorage.setItem(\"woo-next-cart\",JSON.stringify(e)),e},i=function(t,n,e){return{productId:t.productId,image:t.image,name:t.name,price:n,qty:e,totalPrice:parseFloat((n*e).toFixed(2))}},u=function(t,n,e){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=c(t.products,n,e,r),a=function(t,n){return t.totalPrice+=n.totalPrice,t.qty+=n.qty,t},i=o.reduce(a,{totalPrice:0,qty:0}),u={products:o,totalProductsCount:parseInt(i.qty),totalProductsPrice:parseFloat(i.totalPrice)};return localStorage.setItem(\"woo-next-cart\",JSON.stringify(u)),u},c=function(t,n,e){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=d(t,n.productId);if(-1<a){var u=t,c=u[a];return c.qty=r?parseInt(r):parseInt(c.qty+e),c.totalPrice=parseFloat((c.price*c.qty).toFixed(2)),u}var s=o(n.price),l=i(n,s,e);return t.push(l),t},d=function(t,n){var e=t.filter((function(t,e){if(n===t.productId)return t}));return t.indexOf(e[0])},s=function(t){var n=null;if(void 0===t||!t.cart.contents.nodes.length)return n;var e=t.cart.contents.nodes;(n={}).products=[];for(var r=0,a=0;a<e.length;a++){var i=e[a].product,u={},c=o(e[a].total);u.productId=i.productId,u.cartKey=e[a].key,u.name=i.name,u.qty=e[a].quantity,u.price=c/u.qty,u.totalPrice=e[a].total,u.image={sourceUrl:i.image.sourceUrl,srcSet:i.image.srcSet,title:i.image.title},r+=e[a].quantity,n.products.push(u)}return n.totalProductsCount=r,n.totalProductsPrice=t.cart.total,n},l=function(t){return{clientMutationId:Object(r.a)(),billing:{firstName:t.firstName,lastName:t.lastName,address1:t.address1,address2:t.address2,city:t.city,country:t.country,state:t.state,postcode:t.postcode,email:t.email,phone:t.phone,company:t.company},shipping:{firstName:t.firstName,lastName:t.lastName,address1:t.address1,address2:t.address2,city:t.city,country:t.country,state:t.state,postcode:t.postcode,email:t.email,phone:t.phone,company:t.company},shipToDifferentAddress:!1,paymentMethod:t.paymentMethod,isPaid:!1,transactionId:\"hjkhjkhsdsdiui\"}},p=function(t,n,e){var r=[];return t.map((function(t){t.cartKey===e?r.push({key:t.cartKey,quantity:parseInt(n)}):r.push({key:t.cartKey,quantity:t.qty})})),r}}}]);","map":{"version":3,"sources":["static/chunks/92f88e2d2dcddcec3f948352254cdeede6eff9a5.2b58854ef42dbdbd6833.js"],"names":["window","push","7Cbv","module","__webpack_exports__","__webpack_require__","getRandomValues","rnds8","Uint8Array","rng","crypto","bind","msCrypto","Error","regex","esm_browser_validate","uuid","test","byteToHex","stringify_i","toString","substr","esm_browser_stringify","arr","offset","arguments","length","undefined","toLowerCase","TypeError","options","buf","rnds","random","i","OXhd","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","_opt_lampp_htdocs_wordpress_wp_content_themes_react_next_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__","_opt_lampp_htdocs_wordpress_wp_content_themes_react_next_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_2__","react__WEBPACK_IMPORTED_MODULE_3__","_apollo_client__WEBPACK_IMPORTED_MODULE_4__","_context_AppContext__WEBPACK_IMPORTED_MODULE_5__","_functions__WEBPACK_IMPORTED_MODULE_6__","next_link__WEBPACK_IMPORTED_MODULE_7__","next_link__WEBPACK_IMPORTED_MODULE_7___default","n","_components_Apolloclient__WEBPACK_IMPORTED_MODULE_8__","uuid__WEBPACK_IMPORTED_MODULE_9__","_templateObject2","data","Object","_templateObject","ADD_TO_CART","GET_CART","props","product","productQryInput","clientMutationId","productId","_useContext","setCart","_useState","showViewCart","setShowViewCart","_useState2","setRequestError","_useQuery","notifyOnNetworkStatusChange","onCompleted","updatedCart","localStorage","setItem","JSON","stringify","loading","error","refetch","_useMutation","variables","input","addToCartError","graphQLErrors","message","onError","_useMutation2","addToCart","_useMutation2$","addToCartLoading","client","children","__typename","href","externalUrl","target","className","onClick","a","nyHz","d","addFirstProduct","updateCart","getFormattedCart","createCheckoutData","getUpdatedItems","uuid__WEBPACK_IMPORTED_MODULE_0__","getFloatVal","string","floatValue","match","parseFloat","toFixed","productPrice","price","newCart","products","totalProductsCount","totalProductsPrice","newProduct","createNewProduct","qty","image","name","totalPrice","existingCart","qtyToBeAdded","newQty","updatedProducts","getUpdatedProducts","addPrice","total","item","reduce","parseInt","existingProductsInCart","productExitsIndex","isProductInCart","updatedProduct","newArray","filter","index","indexOf","formattedCart","cart","contents","nodes","givenProducts","givenProduct","cartKey","key","quantity","sourceUrl","srcSet","title","order","billing","firstName","lastName","address1","address2","city","country","state","postcode","email","phone","company","shipping","shipToDifferentAddress","paymentMethod","isPaid","transactionId","updatedItems","map","cartItem"],"mappings":"CAACA,OAAyB,iBAAIA,OAAyB,kBAAK,IAAIC,KAAK,CAAC,CAAC,GAAG,CAEpEC,OACA,SAAUC,EAAQC,EAAqBC,GAE7C,aAMA,IAAIC,EACAC,EAAQ,IAAIC,WAAW,IAC3B,SAASC,IAEP,IAAKH,KAGHA,EAAoC,qBAAXI,QAA0BA,OAAOJ,iBAAmBI,OAAOJ,gBAAgBK,KAAKD,SAA+B,qBAAbE,UAAgE,oBAA7BA,SAASN,iBAAkCM,SAASN,gBAAgBK,KAAKC,WAGrO,MAAM,IAAIC,MAAM,4GAIpB,OAAOP,EAAgBC,GAGI,IAAIO,EAAQ,sHAkBzC,IAV6B,IAAIC,EAJjC,SAAkBC,GAChB,MAAuB,kBAATA,GAAqBF,EAAMG,KAAKD,IAW5CE,EAAY,GAEPC,EAAc,EAAGA,EAAc,MAAOA,EAC7CD,EAAUjB,MAAMkB,EAAc,KAAOC,SAAS,IAAIC,OAAO,IAoB9B,IAAIC,EAjBjC,SAAmBC,GACjB,IAAIC,EAASC,UAAUC,OAAS,QAAsBC,IAAjBF,UAAU,GAAmBA,UAAU,GAAK,EAG7ET,GAAQE,EAAUK,EAAIC,EAAS,IAAMN,EAAUK,EAAIC,EAAS,IAAMN,EAAUK,EAAIC,EAAS,IAAMN,EAAUK,EAAIC,EAAS,IAAM,IAAMN,EAAUK,EAAIC,EAAS,IAAMN,EAAUK,EAAIC,EAAS,IAAM,IAAMN,EAAUK,EAAIC,EAAS,IAAMN,EAAUK,EAAIC,EAAS,IAAM,IAAMN,EAAUK,EAAIC,EAAS,IAAMN,EAAUK,EAAIC,EAAS,IAAM,IAAMN,EAAUK,EAAIC,EAAS,KAAON,EAAUK,EAAIC,EAAS,KAAON,EAAUK,EAAIC,EAAS,KAAON,EAAUK,EAAIC,EAAS,KAAON,EAAUK,EAAIC,EAAS,KAAON,EAAUK,EAAIC,EAAS,MAAMI,cAMzf,IAAKb,EAAqBC,GACxB,MAAMa,UAAU,+BAGlB,OAAOb,GA4ByCZ,EAAuB,EApBzE,SAAY0B,EAASC,EAAKP,GAExB,IAAIQ,GADJF,EAAUA,GAAW,IACFG,SAAWH,EAAQrB,KAAOA,KAK7C,GAHAuB,EAAK,GAAe,GAAVA,EAAK,GAAY,GAC3BA,EAAK,GAAe,GAAVA,EAAK,GAAY,IAEvBD,EAAK,CACPP,EAASA,GAAU,EAEnB,IAAK,IAAIU,EAAI,EAAGA,EAAI,KAAMA,EACxBH,EAAIP,EAASU,GAAKF,EAAKE,GAGzB,OAAOH,EAGT,OAAOT,EAAsBU,KAOzBG,KACA,SAAUhC,EAAQC,EAAqBC,GAE7C,aACqB,IAAI+B,EAAiD/B,EAAoB,QAErEgC,EAA6IhC,EAAoB,QACjKiC,EAAqJjC,EAAoB,QACzKkC,EAAqClC,EAAoB,QAEzDmC,EAA8CnC,EAAoB,QAClEoC,EAAmDpC,EAAoB,QACvEqC,EAA0CrC,EAAoB,QAC9DsC,EAAyCtC,EAAoB,QAC7DuC,EAA8DvC,EAAoBwC,EAAEF,GACpFG,EAAwDzC,EAAoB,QAC5E0C,EAAoC1C,EAAoB,QAMjF,SAAS2C,IACP,IAAIC,EAAOC,OAAOZ,EAAoK,EAA3KY,CAA8K,CAAC,4yDAM1L,OAJAF,EAAmB,WACjB,OAAOC,GAGFA,EAGT,SAASE,IACP,IAAIF,EAAOC,OAAOZ,EAAoK,EAA3KY,CAA8K,CAAC,mgCAM1L,OAJAC,EAAkB,WAChB,OAAOF,GAGFA,EAaT,IAAIG,EAAcF,OAAOV,EAAiD,IAAxDU,CAA2DC,KACzEE,EAAWH,OAAOV,EAAiD,IAAxDU,CAA2DF,KAsI7C5C,EAAuB,EApIpC,SAAmBkD,GACjC,IAAIC,EAAUD,EAAMC,QAChBC,EAAkB,CACpBC,iBAAkBP,OAAOH,EAAmD,EAA1DG,GAElBQ,UAAWH,EAAQG,WAGjBC,EAAcT,OAAOX,EAA+C,WAAtDW,CAAyDT,EAAqE,GAE5ImB,GADOD,EAAY,GACTA,EAAY,IAEtBE,EAAYX,OAAOX,EAA6C,SAApDW,EAAuD,GACnEY,EAAeD,EAAU,GACzBE,EAAkBF,EAAU,GAE5BG,EAAad,OAAOX,EAA6C,SAApDW,CAAuD,MAEpEe,GADeD,EAAW,GACRA,EAAW,IAkC7BE,EAAYhB,OAAOV,EAAsD,SAA7DU,CAAgEG,EAAU,CACxFc,6BAA6B,EAC7BC,YAAa,WAIX,IAAIC,EAAcnB,OAAOR,EAAkE,EAAzEQ,CAA4ED,GAC9FqB,aAAaC,QAAQ,gBAAiBC,KAAKC,UAAUJ,IAErDT,EAAQS,MAKRpB,GAFUiB,EAAUQ,QACZR,EAAUS,MACXT,EAAUjB,MACjB2B,EAAUV,EAAUU,QAGpBC,EAAe3B,OAAOV,EAAyD,YAAhEU,CAAmEE,EAAa,CACjG0B,UAAW,CACTC,MAAOvB,GAETY,YAAa,WAIPY,GACFf,EAAgBe,EAAeC,cAAc,GAAGC,SAKlDN,IAEAb,GAAgB,IAElBoB,QAAS,SAAiBR,GACpBA,GACFV,EAAgBU,EAAMM,cAAc,GAAGC,YAIzCE,EAAgBlC,OAAOb,EAA4J,EAAnKa,CAAsK2B,EAAc,GACpMQ,EAAYD,EAAc,GAC1BE,EAAiBF,EAAc,GAE/BG,GADeD,EAAerC,KACXqC,EAAeZ,SAClCM,EAAiBM,EAAeX,MAQpC,OAAoBzB,OAAOd,EAAoD,IAA3Dc,CAA8DV,EAA4D,eAAG,CAC/IgD,OAAQ1C,EAAuE,EAC/E2C,SAAuBvC,OAAOd,EAAqD,KAA5Dc,CAA+D,MAAO,CAC3FuC,SAAU,CAACF,GAAiCrC,OAAOd,EAAoD,IAA3Dc,CAA8D,IAAK,CAC7GuC,SAAU,sBACR,oBAAsBlC,EAAQmC,WAA0BxC,OAAOd,EAAoD,IAA3Dc,CAA8D,IAAK,CAC7HyC,KAAMpC,EAAQqC,YACdC,OAAQ,SACRC,UAAW,iJACXL,SAAU,YACMvC,OAAOd,EAAoD,IAA3Dc,CAA8D,SAAU,CACxF6C,QAjBqB,WAEzB9B,EAAgB,MAChBoB,KAeIS,UAAW,oIACXL,SAAU,gBACR3B,EAA4BZ,OAAOd,EAAoD,IAA3Dc,CAA8DN,EAA+CoD,EAAG,CAC9IL,KAAM,QACNF,SAAuBvC,OAAOd,EAAoD,IAA3Dc,CAA8D,SAAU,CAC7F4C,UAAW,4IACXL,SAAU,gBAET,UASLQ,KACA,SAAU9F,EAAQC,EAAqBC,GAE7C,aAE+BA,EAAoB6F,EAAE9F,EAAqB,KAAK,WAAa,OAAO+F,KAEpE9F,EAAoB6F,EAAE9F,EAAqB,KAAK,WAAa,OAAOgG,KAGpE/F,EAAoB6F,EAAE9F,EAAqB,KAAK,WAAa,OAAOiG,KACpEhG,EAAoB6F,EAAE9F,EAAqB,KAAK,WAAa,OAAOkG,KACpEjG,EAAoB6F,EAAE9F,EAAqB,KAAK,WAAa,OAAOmG,KAC9E,IAAIC,EAAoCnG,EAAoB,QAS7EoG,EAAc,SAAqBC,GACrC,IAAIC,EAAaD,EAAOE,MAAM,qBAAqB,GACnD,OAAO,OAASD,EAAaE,WAAWA,WAAWF,GAAYG,QAAQ,IAAM,IAS3EX,EAAkB,SAAyB5C,GAC7C,IAAIwD,EAAeN,EAAYlD,EAAQyD,OACnCC,EAAU,CACZC,SAAU,GACVC,mBAAoB,EACpBC,mBAAoBL,GAElBM,EAAaC,EAAiB/D,EAASwD,EAAc,GAGzD,OAFAE,EAAQC,SAASjH,KAAKoH,GACtB/C,aAAaC,QAAQ,gBAAiBC,KAAKC,UAAUwC,IAC9CA,GAWLK,EAAmB,SAA0B/D,EAASwD,EAAcQ,GACtE,MAAO,CACL7D,UAAWH,EAAQG,UACnB8D,MAAOjE,EAAQiE,MACfC,KAAMlE,EAAQkE,KACdT,MAAOD,EACPQ,IAAKA,EACLG,WAAYb,YAAYE,EAAeQ,GAAKT,QAAQ,MAapDV,EAAa,SAAoBuB,EAAcpE,EAASqE,GAC1D,IAAIC,EAASpG,UAAUC,OAAS,QAAsBC,IAAjBF,UAAU,IAAmBA,UAAU,GACxEqG,EAAkBC,EAAmBJ,EAAaT,SAAU3D,EAASqE,EAAcC,GAEnFG,EAAW,SAAkBC,EAAOC,GAGtC,OAFAD,EAAMP,YAAcQ,EAAKR,WACzBO,EAAMV,KAAOW,EAAKX,IACXU,GAILA,EAAQH,EAAgBK,OAAOH,EAAU,CAC3CN,WAAY,EACZH,IAAK,IAEHlD,EAAc,CAChB6C,SAAUY,EACVX,mBAAoBiB,SAASH,EAAMV,KACnCH,mBAAoBP,WAAWoB,EAAMP,aAGvC,OADApD,aAAaC,QAAQ,gBAAiBC,KAAKC,UAAUJ,IAC9CA,GAcL0D,EAAqB,SAA4BM,EAAwB9E,EAASqE,GACpF,IAAIC,EAASpG,UAAUC,OAAS,QAAsBC,IAAjBF,UAAU,IAAmBA,UAAU,GAExE6G,EAAoBC,EAAgBF,EAAwB9E,EAAQG,WAExE,IAAK,EAAI4E,EAAmB,CAC1B,IAAIR,EAAkBO,EAClBG,EAAiBV,EAAgBQ,GAIrC,OAFAE,EAAejB,IAAMM,EAASO,SAASP,GAAUO,SAASI,EAAejB,IAAMK,GAC/EY,EAAed,WAAab,YAAY2B,EAAexB,MAAQwB,EAAejB,KAAKT,QAAQ,IACpFgB,EAGP,IAAIf,EAAeN,EAAYlD,EAAQyD,OACnCK,EAAaC,EAAiB/D,EAASwD,EAAca,GAEzD,OADAS,EAAuBpI,KAAKoH,GACrBgB,GAWPE,EAAkB,SAAyBF,EAAwB3E,GACrE,IAOI+E,EAAWJ,EAAuBK,QAPZ,SAA6BR,EAAMS,GAC3D,GAAIjF,IAAcwE,EAAKxE,UACrB,OAAOwE,KAMX,OAAOG,EAAuBO,QAAQH,EAAS,KA0C7CpC,EAAmB,SAA0BpD,GAC/C,IAAI4F,EAAgB,KAEpB,QAAIlH,IAAcsB,IAASA,EAAK6F,KAAKC,SAASC,MAAMtH,OAClD,OAAOmH,EAGT,IAAII,EAAgBhG,EAAK6F,KAAKC,SAASC,OAEvCH,EAAgB,IACF3B,SAAW,GAGzB,IAFA,IAAIC,EAAqB,EAEhBjF,EAAI,EAAGA,EAAI+G,EAAcvH,OAAQQ,IAAK,CAC7C,IAAIgH,EAAeD,EAAc/G,GAAGqB,QAChCA,EAAU,GACV0E,EAAQxB,EAAYwC,EAAc/G,GAAG+F,OACzC1E,EAAQG,UAAYwF,EAAaxF,UACjCH,EAAQ4F,QAAUF,EAAc/G,GAAGkH,IACnC7F,EAAQkE,KAAOyB,EAAazB,KAC5BlE,EAAQgE,IAAM0B,EAAc/G,GAAGmH,SAC/B9F,EAAQyD,MAAQiB,EAAQ1E,EAAQgE,IAChChE,EAAQmE,WAAauB,EAAc/G,GAAG+F,MACtC1E,EAAQiE,MAAQ,CACd8B,UAAWJ,EAAa1B,MAAM8B,UAC9BC,OAAQL,EAAa1B,MAAM+B,OAC3BC,MAAON,EAAa1B,MAAMgC,OAE5BrC,GAAsB8B,EAAc/G,GAAGmH,SAEvCR,EAAc3B,SAASjH,KAAKsD,GAK9B,OAFAsF,EAAc1B,mBAAqBA,EACnC0B,EAAczB,mBAAqBnE,EAAK6F,KAAKb,MACtCY,GAELvC,EAAqB,SAA4BmD,GAkCnD,MAjCmB,CACjBhG,iBAAkBP,OAAOsD,EAAmD,EAA1DtD,GAClBwG,QAAS,CACPC,UAAWF,EAAME,UACjBC,SAAUH,EAAMG,SAChBC,SAAUJ,EAAMI,SAChBC,SAAUL,EAAMK,SAChBC,KAAMN,EAAMM,KACZC,QAASP,EAAMO,QACfC,MAAOR,EAAMQ,MACbC,SAAUT,EAAMS,SAChBC,MAAOV,EAAMU,MACbC,MAAOX,EAAMW,MACbC,QAASZ,EAAMY,SAEjBC,SAAU,CACRX,UAAWF,EAAME,UACjBC,SAAUH,EAAMG,SAChBC,SAAUJ,EAAMI,SAChBC,SAAUL,EAAMK,SAChBC,KAAMN,EAAMM,KACZC,QAASP,EAAMO,QACfC,MAAOR,EAAMQ,MACbC,SAAUT,EAAMS,SAChBC,MAAOV,EAAMU,MACbC,MAAOX,EAAMW,MACbC,QAASZ,EAAMY,SAEjBE,wBAAwB,EACxBC,cAAef,EAAMe,cACrBC,QAAQ,EACRC,cAAe,mBAgBfnE,EAAkB,SAAyBW,EAAUW,EAAQsB,GAE/D,IAAIwB,EAAe,GAiBnB,OAfAzD,EAAS0D,KAAI,SAAUC,GAEjBA,EAAS1B,UAAYA,EACvBwB,EAAa1K,KAAK,CAChBmJ,IAAKyB,EAAS1B,QACdE,SAAUjB,SAASP,KAGrB8C,EAAa1K,KAAK,CAChBmJ,IAAKyB,EAAS1B,QACdE,SAAUwB,EAAStD,SAKlBoD"},"name":"static/chunks/92f88e2d2dcddcec3f948352254cdeede6eff9a5.2b58854ef42dbdbd6833.js","input":"(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[8],{\n\n/***/ \"7Cbv\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/rng.js\n// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nfunction rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}\n// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/regex.js\n/* harmony default export */ var regex = (/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i);\n// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/validate.js\n\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && regex.test(uuid);\n}\n\n/* harmony default export */ var esm_browser_validate = (validate);\n// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/stringify.js\n\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var stringify_i = 0; stringify_i < 256; ++stringify_i) {\n  byteToHex.push((stringify_i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!esm_browser_validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\n/* harmony default export */ var esm_browser_stringify = (stringify);\n// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/v4.js\n\n\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return esm_browser_stringify(rnds);\n}\n\n/* harmony default export */ var esm_browser_v4 = __webpack_exports__[\"a\"] = (v4);\n\n/***/ }),\n\n/***/ \"OXhd\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"nKUr\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _opt_lampp_htdocs_wordpress_wp_content_themes_react_next_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"ODXe\");\n/* harmony import */ var _opt_lampp_htdocs_wordpress_wp_content_themes_react_next_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"h4VS\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"VX74\");\n/* harmony import */ var _context_AppContext__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"w4YB\");\n/* harmony import */ var _functions__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"nyHz\");\n/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"YFqc\");\n/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_link__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _components_Apolloclient__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"+xVt\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"7Cbv\");\n\n\n\n\n\nfunction _templateObject2() {\n  var data = Object(_opt_lampp_htdocs_wordpress_wp_content_themes_react_next_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])([\"\\n  query GET_CART {\\n    cart {\\n      contents {\\n        nodes {\\n          key\\n          product {\\n            id\\n            productId\\n            name\\n            description\\n            type\\n            onSale\\n            slug\\n            averageRating\\n            reviewCount\\n            image {\\n              id\\n                sourceUrl\\n                srcSet\\n                altText\\n                title       \\n            }\\n            galleryImages {\\n              nodes {\\n                id\\n                sourceUrl\\n                srcSet\\n                altText\\n                title   \\n              }\\n            }\\n\\n          }\\n          variation {\\n            id\\n            variationId\\n            name\\n            description\\n            type\\n            onSale\\n            price\\n            regularPrice\\n            salePrice\\n            image {\\n              id\\n              sourceUrl\\n              srcSet\\n              altText\\n              title      \\n            }\\n            attributes {\\n              nodes {\\n                id\\n                name\\n                value\\n              }\\n            }\\n          }\\n          quantity\\n          total\\n          subtotal\\n          subtotalTax\\n        }\\n      }\\n      appliedCoupons {\\n        nodes {\\n          id\\n          couponId\\n          discountType\\n          amount\\n          dateExpiry\\n          products {\\n            nodes {\\n              id\\n            }\\n          }\\n          productCategories {\\n            nodes {\\n              id\\n            }\\n          }\\n        }\\n      }\\n      subtotal\\n      subtotalTax\\n      shippingTax\\n      shippingTotal\\n      total\\n      totalTax\\n      feeTax\\n      feeTotal\\n      discountTax\\n      discountTotal\\n    }\\n  }\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = Object(_opt_lampp_htdocs_wordpress_wp_content_themes_react_next_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])([\"\\n  mutation ($input: AddToCartInput!) {\\n    __typename\\n  addToCart(input: $input) {\\n    clientMutationId\\n    cartItem {\\n      key\\n      product {\\n        id\\n        productId\\n        name\\n        description\\n        type\\n        onSale\\n        slug\\n        averageRating\\n        reviewCount\\n        image {\\n          id\\n          sourceUrl\\n          altText\\n        }\\n        galleryImages {\\n          nodes {\\n            id\\n            sourceUrl\\n            altText\\n          }\\n        }\\n      }\\n      quantity\\n      subtotal\\n      subtotalTax\\n      tax\\n      total\\n      variation{\\n        id\\n        variationId\\n        name\\n        description\\n        type\\n        onSale\\n        price\\n        regularPrice\\n        salePrice\\n        image{\\n          id\\n          sourceUrl\\n          altText\\n        }\\n        attributes{\\n          nodes{\\n            id\\n            attributeId\\n            name\\n            value\\n          }\\n        }\\n      }\\n    }\\n  }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\n\n\n\n\n\n //import gql from \"graphql-tag\";\n\n //import GET_CART from \"../../queries/get-cart\";\n//import ADD_TO_CART from \"../../mutations/add-to-cart\";\n\nvar ADD_TO_CART = Object(_apollo_client__WEBPACK_IMPORTED_MODULE_4__[\"gql\"])(_templateObject());\nvar GET_CART = Object(_apollo_client__WEBPACK_IMPORTED_MODULE_4__[\"gql\"])(_templateObject2());\n\nvar AddToCart = function AddToCart(props) {\n  var product = props.product;\n  var productQryInput = {\n    clientMutationId: Object(uuid__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"])(),\n    // Generate a unique id.\n    productId: product.productId\n  };\n\n  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useContext\"])(_context_AppContext__WEBPACK_IMPORTED_MODULE_5__[/* AppContext */ \"a\"]),\n      cart = _useContext[0],\n      setCart = _useContext[1];\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useState\"])(false),\n      showViewCart = _useState[0],\n      setShowViewCart = _useState[1];\n\n  var _useState2 = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useState\"])(null),\n      requestError = _useState2[0],\n      setRequestError = _useState2[1];\n  /**\n   * @TODO will update this in future, when required.\n   * Handles adding items to the cart.\n   *\n   * @return {void}\n   */\n\n\n  var handleAddToCartLocalStorage = function handleAddToCartLocalStorage() {\n    // If component is rendered client side.\n    if (true) {\n      var existingCart = localStorage.getItem('woo-next-cart'); // If cart has item(s) already, update existing or add new item.\n\n      if (!existingCart) {\n        existingCart = JSON.parse(existingCart);\n        var qtyToBeAdded = 1;\n        var updatedCart = Object(_functions__WEBPACK_IMPORTED_MODULE_6__[/* updateCart */ \"e\"])(existingCart, product, qtyToBeAdded);\n        setCart(updatedCart);\n      } else {\n        /**\n         * If No Items in the cart, create an empty array and add one.\n         * @type {Array}\n         */\n        var newCart = Object(_functions__WEBPACK_IMPORTED_MODULE_6__[/* addFirstProduct */ \"a\"])(product);\n        setCart(newCart);\n      } // Show View Cart Button\n\n\n      setShowViewCart(true);\n    }\n  }; // Get Cart Data.\n\n\n  var _useQuery = Object(_apollo_client__WEBPACK_IMPORTED_MODULE_4__[\"useQuery\"])(GET_CART, {\n    notifyOnNetworkStatusChange: true,\n    onCompleted: function onCompleted() {\n      //console.warn( 'completed GET_CART' );\n      //\tconsole.log(data)\n      // Update cart in the localStorage.\n      var updatedCart = Object(_functions__WEBPACK_IMPORTED_MODULE_6__[/* getFormattedCart */ \"c\"])(data);\n      localStorage.setItem('woo-next-cart', JSON.stringify(updatedCart)); // Update cart data in React Context.\n\n      setCart(updatedCart);\n    }\n  }),\n      loading = _useQuery.loading,\n      error = _useQuery.error,\n      data = _useQuery.data,\n      refetch = _useQuery.refetch; // Add to Cart Mutation.\n\n\n  var _useMutation = Object(_apollo_client__WEBPACK_IMPORTED_MODULE_4__[\"useMutation\"])(ADD_TO_CART, {\n    variables: {\n      input: productQryInput\n    },\n    onCompleted: function onCompleted() {\n      // console.warn( 'completed ADD_TO_CART' );\n      //console.log(data)\n      // If error.\n      if (addToCartError) {\n        setRequestError(addToCartError.graphQLErrors[0].message);\n      } // On Success:\n      // 1. Make the GET_CART query to update the cart with new values in React context.\n\n\n      refetch(); // 2. Show View Cart Button\n\n      setShowViewCart(true);\n    },\n    onError: function onError(error) {\n      if (error) {\n        setRequestError(error.graphQLErrors[0].message);\n      }\n    }\n  }),\n      _useMutation2 = Object(_opt_lampp_htdocs_wordpress_wp_content_themes_react_next_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])(_useMutation, 2),\n      addToCart = _useMutation2[0],\n      _useMutation2$ = _useMutation2[1],\n      addToCartRes = _useMutation2$.data,\n      addToCartLoading = _useMutation2$.loading,\n      addToCartError = _useMutation2$.error;\n\n  var handleAddToCartClick = function handleAddToCartClick() {\n    //handleAddToCartLocalStorage();\n    setRequestError(null);\n    addToCart();\n  };\n\n  return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(_apollo_client__WEBPACK_IMPORTED_MODULE_4__[\"ApolloProvider\"], {\n    client: _components_Apolloclient__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"],\n    children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"div\", {\n      children: [addToCartLoading && /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"p\", {\n        children: \"Adding to Cart...\"\n      }), \"ExternalProduct\" === product.__typename ? /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"a\", {\n        href: product.externalUrl,\n        target: \"_blank\",\n        className: \"px-3 py-1 rounded-sm mr-3 text-sm border-solid border border-current inline-block hover:bg-purple-600 hover:text-white hover:border-purple-600\",\n        children: \"Buy now\"\n      }) : /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"button\", {\n        onClick: handleAddToCartClick,\n        className: \"px-3 py-1 rounded-sm mr-3 text-sm border-solid border border-current hover:bg-purple-600 hover:text-white hover:border-purple-600\",\n        children: \"Add to cart\"\n      }), showViewCart ? /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(next_link__WEBPACK_IMPORTED_MODULE_7___default.a, {\n        href: \"/cart\",\n        children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"button\", {\n          className: \"px-3 py-1 rounded-sm text-sm border-solid border border-current inline-block hover:bg-purple-600 hover:text-white hover:border-purple-600\",\n          children: \"View Cart\"\n        })\n      }) : '']\n    })\n  });\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (AddToCart);\n\n/***/ }),\n\n/***/ \"nyHz\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export getFloatVal */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return addFirstProduct; });\n/* unused harmony export createNewProduct */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return updateCart; });\n/* unused harmony export getUpdatedProducts */\n/* unused harmony export removeItemFromCart */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return getFormattedCart; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return createCheckoutData; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return getUpdatedItems; });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"7Cbv\");\n\n/**\n * Extracts and returns float value from a string.\n *\n * @param {string} string String\n * @return {any}\n */\n\nvar getFloatVal = function getFloatVal(string) {\n  var floatValue = string.match(/[+-]?\\d+(\\.\\d+)?/g)[0];\n  return null !== floatValue ? parseFloat(parseFloat(floatValue).toFixed(2)) : '';\n};\n/**\n * Add first product.\n *\n * @param {Object} product Product\n * @return {{totalProductsCount: number, totalProductsPrice: any, products: Array}}\n */\n\nvar addFirstProduct = function addFirstProduct(product) {\n  var productPrice = getFloatVal(product.price);\n  var newCart = {\n    products: [],\n    totalProductsCount: 1,\n    totalProductsPrice: productPrice\n  };\n  var newProduct = createNewProduct(product, productPrice, 1);\n  newCart.products.push(newProduct);\n  localStorage.setItem('woo-next-cart', JSON.stringify(newCart));\n  return newCart;\n};\n/**\n * Create a new product object.\n *\n * @param {Object} product Product\n * @param {Integer} productPrice Product Price\n * @param {Integer} qty Quantity\n * @return {{image: *, productId: *, totalPrice: number, price: *, qty: *, name: *}}\n */\n\nvar createNewProduct = function createNewProduct(product, productPrice, qty) {\n  return {\n    productId: product.productId,\n    image: product.image,\n    name: product.name,\n    price: productPrice,\n    qty: qty,\n    totalPrice: parseFloat((productPrice * qty).toFixed(2))\n  };\n};\n/**\n * Updates the existing cart with new item.\n *\n * @param {Object} existingCart Existing Cart.\n * @param {Object} product Product.\n * @param {Integer} qtyToBeAdded Quantity.\n * @param {Integer} newQty New Qty to be updated.\n * @return {{totalProductsCount: *, totalProductsPrice: *, products: *}}\n */\n\nvar updateCart = function updateCart(existingCart, product, qtyToBeAdded) {\n  var newQty = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var updatedProducts = getUpdatedProducts(existingCart.products, product, qtyToBeAdded, newQty);\n\n  var addPrice = function addPrice(total, item) {\n    total.totalPrice += item.totalPrice;\n    total.qty += item.qty;\n    return total;\n  }; // Loop through the updated product array and add the totalPrice of each item to get the totalPrice\n\n\n  var total = updatedProducts.reduce(addPrice, {\n    totalPrice: 0,\n    qty: 0\n  });\n  var updatedCart = {\n    products: updatedProducts,\n    totalProductsCount: parseInt(total.qty),\n    totalProductsPrice: parseFloat(total.totalPrice)\n  };\n  localStorage.setItem('woo-next-cart', JSON.stringify(updatedCart));\n  return updatedCart;\n};\n/**\n * Get updated products array\n * Update the product if it exists else,\n * add the new product to existing cart,\n *\n * @param {Object} existingProductsInCart Existing product in cart\n * @param {Object} product Product\n * @param {Integer} qtyToBeAdded Quantity\n * @param {Integer} newQty New qty of the product (optional)\n * @return {*[]}\n */\n\nvar getUpdatedProducts = function getUpdatedProducts(existingProductsInCart, product, qtyToBeAdded) {\n  var newQty = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  // Check if the product already exits in the cart.\n  var productExitsIndex = isProductInCart(existingProductsInCart, product.productId); // If product exits ( index of that product found in the array ), update the product quantity and totalPrice\n\n  if (-1 < productExitsIndex) {\n    var updatedProducts = existingProductsInCart;\n    var updatedProduct = updatedProducts[productExitsIndex]; // If have new qty of the product available, set that else add the qtyToBeAdded\n\n    updatedProduct.qty = newQty ? parseInt(newQty) : parseInt(updatedProduct.qty + qtyToBeAdded);\n    updatedProduct.totalPrice = parseFloat((updatedProduct.price * updatedProduct.qty).toFixed(2));\n    return updatedProducts;\n  } else {\n    // If product not found push the new product to the existing product array.\n    var productPrice = getFloatVal(product.price);\n    var newProduct = createNewProduct(product, productPrice, qtyToBeAdded);\n    existingProductsInCart.push(newProduct);\n    return existingProductsInCart;\n  }\n};\n/**\n * Returns index of the product if it exists.\n *\n * @param {Object} existingProductsInCart Existing Products.\n * @param {Integer} productId Product id.\n * @return {number | *} Index Returns -1 if product does not exist in the array, index number otherwise\n */\n\nvar isProductInCart = function isProductInCart(existingProductsInCart, productId) {\n  var returnItemThatExits = function returnItemThatExits(item, index) {\n    if (productId === item.productId) {\n      return item;\n    }\n  }; // This new array will only contain the product which is matched.\n\n\n  var newArray = existingProductsInCart.filter(returnItemThatExits);\n  return existingProductsInCart.indexOf(newArray[0]);\n};\n/**\n * Remove Item from the cart.\n *\n * @param {Integer} productId Product Id.\n * @return {any | string} Updated cart\n */\n\n\nvar removeItemFromCart = function removeItemFromCart(productId) {\n  var existingCart = localStorage.getItem('woo-next-cart');\n  existingCart = JSON.parse(existingCart); // If there is only one item in the cart, delete the cart.\n\n  if (1 === existingCart.products.length) {\n    localStorage.removeItem('woo-next-cart');\n    return null;\n  } // Check if the product already exits in the cart.\n\n\n  var productExitsIndex = isProductInCart(existingCart.products, productId); // If product to be removed exits\n\n  if (-1 < productExitsIndex) {\n    var productTobeRemoved = existingCart.products[productExitsIndex];\n    var qtyToBeRemovedFromTotal = productTobeRemoved.qty;\n    var priceToBeDeductedFromTotal = productTobeRemoved.totalPrice; // Remove that product from the array and update the total price and total quantity of the cart\n\n    var updatedCart = existingCart;\n    updatedCart.products.splice(productExitsIndex, 1);\n    updatedCart.totalProductsCount = updatedCart.totalProductsCount - qtyToBeRemovedFromTotal;\n    updatedCart.totalProductsPrice = updatedCart.totalProductsPrice - priceToBeDeductedFromTotal;\n    localStorage.setItem('woo-next-cart', JSON.stringify(updatedCart));\n    return updatedCart;\n  } else {\n    return existingCart;\n  }\n};\n/**\n * Returns cart data in the required format.\n * @param {String} data Cart data\n */\n\nvar getFormattedCart = function getFormattedCart(data) {\n  var formattedCart = null;\n\n  if (undefined === data || !data.cart.contents.nodes.length) {\n    return formattedCart;\n  }\n\n  var givenProducts = data.cart.contents.nodes; // Create an empty object.\n\n  formattedCart = {};\n  formattedCart.products = [];\n  var totalProductsCount = 0;\n\n  for (var i = 0; i < givenProducts.length; i++) {\n    var givenProduct = givenProducts[i].product;\n    var product = {};\n    var total = getFloatVal(givenProducts[i].total);\n    product.productId = givenProduct.productId;\n    product.cartKey = givenProducts[i].key;\n    product.name = givenProduct.name;\n    product.qty = givenProducts[i].quantity;\n    product.price = total / product.qty;\n    product.totalPrice = givenProducts[i].total;\n    product.image = {\n      sourceUrl: givenProduct.image.sourceUrl,\n      srcSet: givenProduct.image.srcSet,\n      title: givenProduct.image.title\n    };\n    totalProductsCount += givenProducts[i].quantity; // Push each item into the products array.\n\n    formattedCart.products.push(product);\n  }\n\n  formattedCart.totalProductsCount = totalProductsCount;\n  formattedCart.totalProductsPrice = data.cart.total;\n  return formattedCart;\n};\nvar createCheckoutData = function createCheckoutData(order) {\n  var checkoutData = {\n    clientMutationId: Object(uuid__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])(),\n    billing: {\n      firstName: order.firstName,\n      lastName: order.lastName,\n      address1: order.address1,\n      address2: order.address2,\n      city: order.city,\n      country: order.country,\n      state: order.state,\n      postcode: order.postcode,\n      email: order.email,\n      phone: order.phone,\n      company: order.company\n    },\n    shipping: {\n      firstName: order.firstName,\n      lastName: order.lastName,\n      address1: order.address1,\n      address2: order.address2,\n      city: order.city,\n      country: order.country,\n      state: order.state,\n      postcode: order.postcode,\n      email: order.email,\n      phone: order.phone,\n      company: order.company\n    },\n    shipToDifferentAddress: false,\n    paymentMethod: order.paymentMethod,\n    isPaid: false,\n    transactionId: \"hjkhjkhsdsdiui\"\n  };\n  return checkoutData;\n};\n/**\n * Get the updated items in the below format required for mutation input.\n *\n * [\n * { \"key\": \"33e75ff09dd601bbe6dd51039152189\", \"quantity\": 1 },\n * { \"key\": \"02e74f10e0327ad868d38f2b4fdd6f0\", \"quantity\": 1 },\n * ]\n *\n * Creates an array in above format with the newQty (updated Qty ).\n *\n */\n\nvar getUpdatedItems = function getUpdatedItems(products, newQty, cartKey) {\n  // Create an empty array.\n  var updatedItems = []; // Loop through the product array.\n\n  products.map(function (cartItem) {\n    // If you find the cart key of the product user is trying to update, push the key and new qty.\n    if (cartItem.cartKey === cartKey) {\n      updatedItems.push({\n        key: cartItem.cartKey,\n        quantity: parseInt(newQty)\n      }); // Otherwise just push the existing qty without updating.\n    } else {\n      updatedItems.push({\n        key: cartItem.cartKey,\n        quantity: cartItem.qty\n      });\n    }\n  }); // Return the updatedItems array with new Qtys.\n\n  return updatedItems;\n};\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["/opt/lampp/htdocs/wordpress/wp-content/themes/react-next/node_modules/uuid/dist/esm-browser/rng.js","/opt/lampp/htdocs/wordpress/wp-content/themes/react-next/node_modules/uuid/dist/esm-browser/regex.js","/opt/lampp/htdocs/wordpress/wp-content/themes/react-next/node_modules/uuid/dist/esm-browser/validate.js","/opt/lampp/htdocs/wordpress/wp-content/themes/react-next/node_modules/uuid/dist/esm-browser/stringify.js","/opt/lampp/htdocs/wordpress/wp-content/themes/react-next/node_modules/uuid/dist/esm-browser/v4.js","/opt/lampp/htdocs/wordpress/wp-content/themes/react-next/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/opt/lampp/htdocs/wordpress/wp-content/themes/react-next/src/components/cart/AddToCartButton.js","/opt/lampp/htdocs/wordpress/wp-content/themes/react-next/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/opt/lampp/htdocs/wordpress/wp-content/themes/react-next/src/functions.js"],"names":[],"mappings":"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W,OAAO;AAClB,aAAa;AACb;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa;AACb;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa;AACb;;AAEO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,YAAY;AACZ;;AAEO;AACP;AACA;AACA,qFAAqF;;AAErF;AACA;AACA,4DAA4D;;AAE5D;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,YAAY,WAAW;AACvB;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,YAAY,aAAa;AACzB;;;AAGO;AACP;AACA,0CAA0C;;AAE1C;AACA;AACA;AACA,GAAG;;;AAGH,4EAA4E;;AAE5E;AACA;AACA;AACA,mEAAmE;;AAEnE;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB;;AAEO;AACP;;AAEA;AACA;AACA;;AAEA,+CAA+C;;AAE/C;AACA;AACA;;AAEA,iBAAiB,0BAA0B;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD;;AAEpD;AACA;;AAEA;AACA;AACA;AACA;AACO;AACP;AACA,sBAAsB,4DAAE;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,0DAA0D;AAC9D,IAAI,0DAA0D;AAC9D;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA,wBAAwB;;AAExB;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,EAAE;AACT,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA,GAAG,EAAE;;AAEL;AACA,E","file":"x","sourcesContent":["// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _slicedToArray from \"/opt/lampp/htdocs/wordpress/wp-content/themes/react-next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"/opt/lampp/htdocs/wordpress/wp-content/themes/react-next/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  query GET_CART {\\n    cart {\\n      contents {\\n        nodes {\\n          key\\n          product {\\n            id\\n            productId\\n            name\\n            description\\n            type\\n            onSale\\n            slug\\n            averageRating\\n            reviewCount\\n            image {\\n              id\\n                sourceUrl\\n                srcSet\\n                altText\\n                title       \\n            }\\n            galleryImages {\\n              nodes {\\n                id\\n                sourceUrl\\n                srcSet\\n                altText\\n                title   \\n              }\\n            }\\n\\n          }\\n          variation {\\n            id\\n            variationId\\n            name\\n            description\\n            type\\n            onSale\\n            price\\n            regularPrice\\n            salePrice\\n            image {\\n              id\\n              sourceUrl\\n              srcSet\\n              altText\\n              title      \\n            }\\n            attributes {\\n              nodes {\\n                id\\n                name\\n                value\\n              }\\n            }\\n          }\\n          quantity\\n          total\\n          subtotal\\n          subtotalTax\\n        }\\n      }\\n      appliedCoupons {\\n        nodes {\\n          id\\n          couponId\\n          discountType\\n          amount\\n          dateExpiry\\n          products {\\n            nodes {\\n              id\\n            }\\n          }\\n          productCategories {\\n            nodes {\\n              id\\n            }\\n          }\\n        }\\n      }\\n      subtotal\\n      subtotalTax\\n      shippingTax\\n      shippingTotal\\n      total\\n      totalTax\\n      feeTax\\n      feeTotal\\n      discountTax\\n      discountTotal\\n    }\\n  }\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  mutation ($input: AddToCartInput!) {\\n    __typename\\n  addToCart(input: $input) {\\n    clientMutationId\\n    cartItem {\\n      key\\n      product {\\n        id\\n        productId\\n        name\\n        description\\n        type\\n        onSale\\n        slug\\n        averageRating\\n        reviewCount\\n        image {\\n          id\\n          sourceUrl\\n          altText\\n        }\\n        galleryImages {\\n          nodes {\\n            id\\n            sourceUrl\\n            altText\\n          }\\n        }\\n      }\\n      quantity\\n      subtotal\\n      subtotalTax\\n      tax\\n      total\\n      variation{\\n        id\\n        variationId\\n        name\\n        description\\n        type\\n        onSale\\n        price\\n        regularPrice\\n        salePrice\\n        image{\\n          id\\n          sourceUrl\\n          altText\\n        }\\n        attributes{\\n          nodes{\\n            id\\n            attributeId\\n            name\\n            value\\n          }\\n        }\\n      }\\n    }\\n  }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport { useState, useContext } from \"react\";\nimport { ApolloProvider, gql, useQuery, useMutation } from '@apollo/client';\nimport { AppContext } from \"../context/AppContext\";\nimport { getFormattedCart, updateCart, addFirstProduct } from \"../../functions\";\nimport Link from \"next/link\";\nimport client from \"../../../components/Apolloclient\"; //import gql from \"graphql-tag\";\n\nimport { v4 } from 'uuid'; //import GET_CART from \"../../queries/get-cart\";\n//import ADD_TO_CART from \"../../mutations/add-to-cart\";\n\nvar ADD_TO_CART = gql(_templateObject());\nvar GET_CART = gql(_templateObject2());\n\nvar AddToCart = function AddToCart(props) {\n  var product = props.product;\n  var productQryInput = {\n    clientMutationId: v4(),\n    // Generate a unique id.\n    productId: product.productId\n  };\n\n  var _useContext = useContext(AppContext),\n      cart = _useContext[0],\n      setCart = _useContext[1];\n\n  var _useState = useState(false),\n      showViewCart = _useState[0],\n      setShowViewCart = _useState[1];\n\n  var _useState2 = useState(null),\n      requestError = _useState2[0],\n      setRequestError = _useState2[1];\n  /**\n   * @TODO will update this in future, when required.\n   * Handles adding items to the cart.\n   *\n   * @return {void}\n   */\n\n\n  var handleAddToCartLocalStorage = function handleAddToCartLocalStorage() {\n    // If component is rendered client side.\n    if (true) {\n      var existingCart = localStorage.getItem('woo-next-cart'); // If cart has item(s) already, update existing or add new item.\n\n      if (!existingCart) {\n        existingCart = JSON.parse(existingCart);\n        var qtyToBeAdded = 1;\n        var updatedCart = updateCart(existingCart, product, qtyToBeAdded);\n        setCart(updatedCart);\n      } else {\n        /**\n         * If No Items in the cart, create an empty array and add one.\n         * @type {Array}\n         */\n        var newCart = addFirstProduct(product);\n        setCart(newCart);\n      } // Show View Cart Button\n\n\n      setShowViewCart(true);\n    }\n  }; // Get Cart Data.\n\n\n  var _useQuery = useQuery(GET_CART, {\n    notifyOnNetworkStatusChange: true,\n    onCompleted: function onCompleted() {\n      //console.warn( 'completed GET_CART' );\n      //\tconsole.log(data)\n      // Update cart in the localStorage.\n      var updatedCart = getFormattedCart(data);\n      localStorage.setItem('woo-next-cart', JSON.stringify(updatedCart)); // Update cart data in React Context.\n\n      setCart(updatedCart);\n    }\n  }),\n      loading = _useQuery.loading,\n      error = _useQuery.error,\n      data = _useQuery.data,\n      refetch = _useQuery.refetch; // Add to Cart Mutation.\n\n\n  var _useMutation = useMutation(ADD_TO_CART, {\n    variables: {\n      input: productQryInput\n    },\n    onCompleted: function onCompleted() {\n      // console.warn( 'completed ADD_TO_CART' );\n      //console.log(data)\n      // If error.\n      if (addToCartError) {\n        setRequestError(addToCartError.graphQLErrors[0].message);\n      } // On Success:\n      // 1. Make the GET_CART query to update the cart with new values in React context.\n\n\n      refetch(); // 2. Show View Cart Button\n\n      setShowViewCart(true);\n    },\n    onError: function onError(error) {\n      if (error) {\n        setRequestError(error.graphQLErrors[0].message);\n      }\n    }\n  }),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      addToCart = _useMutation2[0],\n      _useMutation2$ = _useMutation2[1],\n      addToCartRes = _useMutation2$.data,\n      addToCartLoading = _useMutation2$.loading,\n      addToCartError = _useMutation2$.error;\n\n  var handleAddToCartClick = function handleAddToCartClick() {\n    //handleAddToCartLocalStorage();\n    setRequestError(null);\n    addToCart();\n  };\n\n  return /*#__PURE__*/_jsx(ApolloProvider, {\n    client: client,\n    children: /*#__PURE__*/_jsxs(\"div\", {\n      children: [addToCartLoading && /*#__PURE__*/_jsx(\"p\", {\n        children: \"Adding to Cart...\"\n      }), \"ExternalProduct\" === product.__typename ? /*#__PURE__*/_jsx(\"a\", {\n        href: product.externalUrl,\n        target: \"_blank\",\n        className: \"px-3 py-1 rounded-sm mr-3 text-sm border-solid border border-current inline-block hover:bg-purple-600 hover:text-white hover:border-purple-600\",\n        children: \"Buy now\"\n      }) : /*#__PURE__*/_jsx(\"button\", {\n        onClick: handleAddToCartClick,\n        className: \"px-3 py-1 rounded-sm mr-3 text-sm border-solid border border-current hover:bg-purple-600 hover:text-white hover:border-purple-600\",\n        children: \"Add to cart\"\n      }), showViewCart ? /*#__PURE__*/_jsx(Link, {\n        href: \"/cart\",\n        children: /*#__PURE__*/_jsx(\"button\", {\n          className: \"px-3 py-1 rounded-sm text-sm border-solid border border-current inline-block hover:bg-purple-600 hover:text-white hover:border-purple-600\",\n          children: \"View Cart\"\n        })\n      }) : '']\n    })\n  });\n};\n\nexport default AddToCart;","import { v4 } from 'uuid';\n/**\n * Extracts and returns float value from a string.\n *\n * @param {string} string String\n * @return {any}\n */\n\nexport var getFloatVal = function getFloatVal(string) {\n  var floatValue = string.match(/[+-]?\\d+(\\.\\d+)?/g)[0];\n  return null !== floatValue ? parseFloat(parseFloat(floatValue).toFixed(2)) : '';\n};\n/**\n * Add first product.\n *\n * @param {Object} product Product\n * @return {{totalProductsCount: number, totalProductsPrice: any, products: Array}}\n */\n\nexport var addFirstProduct = function addFirstProduct(product) {\n  var productPrice = getFloatVal(product.price);\n  var newCart = {\n    products: [],\n    totalProductsCount: 1,\n    totalProductsPrice: productPrice\n  };\n  var newProduct = createNewProduct(product, productPrice, 1);\n  newCart.products.push(newProduct);\n  localStorage.setItem('woo-next-cart', JSON.stringify(newCart));\n  return newCart;\n};\n/**\n * Create a new product object.\n *\n * @param {Object} product Product\n * @param {Integer} productPrice Product Price\n * @param {Integer} qty Quantity\n * @return {{image: *, productId: *, totalPrice: number, price: *, qty: *, name: *}}\n */\n\nexport var createNewProduct = function createNewProduct(product, productPrice, qty) {\n  return {\n    productId: product.productId,\n    image: product.image,\n    name: product.name,\n    price: productPrice,\n    qty: qty,\n    totalPrice: parseFloat((productPrice * qty).toFixed(2))\n  };\n};\n/**\n * Updates the existing cart with new item.\n *\n * @param {Object} existingCart Existing Cart.\n * @param {Object} product Product.\n * @param {Integer} qtyToBeAdded Quantity.\n * @param {Integer} newQty New Qty to be updated.\n * @return {{totalProductsCount: *, totalProductsPrice: *, products: *}}\n */\n\nexport var updateCart = function updateCart(existingCart, product, qtyToBeAdded) {\n  var newQty = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var updatedProducts = getUpdatedProducts(existingCart.products, product, qtyToBeAdded, newQty);\n\n  var addPrice = function addPrice(total, item) {\n    total.totalPrice += item.totalPrice;\n    total.qty += item.qty;\n    return total;\n  }; // Loop through the updated product array and add the totalPrice of each item to get the totalPrice\n\n\n  var total = updatedProducts.reduce(addPrice, {\n    totalPrice: 0,\n    qty: 0\n  });\n  var updatedCart = {\n    products: updatedProducts,\n    totalProductsCount: parseInt(total.qty),\n    totalProductsPrice: parseFloat(total.totalPrice)\n  };\n  localStorage.setItem('woo-next-cart', JSON.stringify(updatedCart));\n  return updatedCart;\n};\n/**\n * Get updated products array\n * Update the product if it exists else,\n * add the new product to existing cart,\n *\n * @param {Object} existingProductsInCart Existing product in cart\n * @param {Object} product Product\n * @param {Integer} qtyToBeAdded Quantity\n * @param {Integer} newQty New qty of the product (optional)\n * @return {*[]}\n */\n\nexport var getUpdatedProducts = function getUpdatedProducts(existingProductsInCart, product, qtyToBeAdded) {\n  var newQty = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  // Check if the product already exits in the cart.\n  var productExitsIndex = isProductInCart(existingProductsInCart, product.productId); // If product exits ( index of that product found in the array ), update the product quantity and totalPrice\n\n  if (-1 < productExitsIndex) {\n    var updatedProducts = existingProductsInCart;\n    var updatedProduct = updatedProducts[productExitsIndex]; // If have new qty of the product available, set that else add the qtyToBeAdded\n\n    updatedProduct.qty = newQty ? parseInt(newQty) : parseInt(updatedProduct.qty + qtyToBeAdded);\n    updatedProduct.totalPrice = parseFloat((updatedProduct.price * updatedProduct.qty).toFixed(2));\n    return updatedProducts;\n  } else {\n    // If product not found push the new product to the existing product array.\n    var productPrice = getFloatVal(product.price);\n    var newProduct = createNewProduct(product, productPrice, qtyToBeAdded);\n    existingProductsInCart.push(newProduct);\n    return existingProductsInCart;\n  }\n};\n/**\n * Returns index of the product if it exists.\n *\n * @param {Object} existingProductsInCart Existing Products.\n * @param {Integer} productId Product id.\n * @return {number | *} Index Returns -1 if product does not exist in the array, index number otherwise\n */\n\nvar isProductInCart = function isProductInCart(existingProductsInCart, productId) {\n  var returnItemThatExits = function returnItemThatExits(item, index) {\n    if (productId === item.productId) {\n      return item;\n    }\n  }; // This new array will only contain the product which is matched.\n\n\n  var newArray = existingProductsInCart.filter(returnItemThatExits);\n  return existingProductsInCart.indexOf(newArray[0]);\n};\n/**\n * Remove Item from the cart.\n *\n * @param {Integer} productId Product Id.\n * @return {any | string} Updated cart\n */\n\n\nexport var removeItemFromCart = function removeItemFromCart(productId) {\n  var existingCart = localStorage.getItem('woo-next-cart');\n  existingCart = JSON.parse(existingCart); // If there is only one item in the cart, delete the cart.\n\n  if (1 === existingCart.products.length) {\n    localStorage.removeItem('woo-next-cart');\n    return null;\n  } // Check if the product already exits in the cart.\n\n\n  var productExitsIndex = isProductInCart(existingCart.products, productId); // If product to be removed exits\n\n  if (-1 < productExitsIndex) {\n    var productTobeRemoved = existingCart.products[productExitsIndex];\n    var qtyToBeRemovedFromTotal = productTobeRemoved.qty;\n    var priceToBeDeductedFromTotal = productTobeRemoved.totalPrice; // Remove that product from the array and update the total price and total quantity of the cart\n\n    var updatedCart = existingCart;\n    updatedCart.products.splice(productExitsIndex, 1);\n    updatedCart.totalProductsCount = updatedCart.totalProductsCount - qtyToBeRemovedFromTotal;\n    updatedCart.totalProductsPrice = updatedCart.totalProductsPrice - priceToBeDeductedFromTotal;\n    localStorage.setItem('woo-next-cart', JSON.stringify(updatedCart));\n    return updatedCart;\n  } else {\n    return existingCart;\n  }\n};\n/**\n * Returns cart data in the required format.\n * @param {String} data Cart data\n */\n\nexport var getFormattedCart = function getFormattedCart(data) {\n  var formattedCart = null;\n\n  if (undefined === data || !data.cart.contents.nodes.length) {\n    return formattedCart;\n  }\n\n  var givenProducts = data.cart.contents.nodes; // Create an empty object.\n\n  formattedCart = {};\n  formattedCart.products = [];\n  var totalProductsCount = 0;\n\n  for (var i = 0; i < givenProducts.length; i++) {\n    var givenProduct = givenProducts[i].product;\n    var product = {};\n    var total = getFloatVal(givenProducts[i].total);\n    product.productId = givenProduct.productId;\n    product.cartKey = givenProducts[i].key;\n    product.name = givenProduct.name;\n    product.qty = givenProducts[i].quantity;\n    product.price = total / product.qty;\n    product.totalPrice = givenProducts[i].total;\n    product.image = {\n      sourceUrl: givenProduct.image.sourceUrl,\n      srcSet: givenProduct.image.srcSet,\n      title: givenProduct.image.title\n    };\n    totalProductsCount += givenProducts[i].quantity; // Push each item into the products array.\n\n    formattedCart.products.push(product);\n  }\n\n  formattedCart.totalProductsCount = totalProductsCount;\n  formattedCart.totalProductsPrice = data.cart.total;\n  return formattedCart;\n};\nexport var createCheckoutData = function createCheckoutData(order) {\n  var checkoutData = {\n    clientMutationId: v4(),\n    billing: {\n      firstName: order.firstName,\n      lastName: order.lastName,\n      address1: order.address1,\n      address2: order.address2,\n      city: order.city,\n      country: order.country,\n      state: order.state,\n      postcode: order.postcode,\n      email: order.email,\n      phone: order.phone,\n      company: order.company\n    },\n    shipping: {\n      firstName: order.firstName,\n      lastName: order.lastName,\n      address1: order.address1,\n      address2: order.address2,\n      city: order.city,\n      country: order.country,\n      state: order.state,\n      postcode: order.postcode,\n      email: order.email,\n      phone: order.phone,\n      company: order.company\n    },\n    shipToDifferentAddress: false,\n    paymentMethod: order.paymentMethod,\n    isPaid: false,\n    transactionId: \"hjkhjkhsdsdiui\"\n  };\n  return checkoutData;\n};\n/**\n * Get the updated items in the below format required for mutation input.\n *\n * [\n * { \"key\": \"33e75ff09dd601bbe6dd51039152189\", \"quantity\": 1 },\n * { \"key\": \"02e74f10e0327ad868d38f2b4fdd6f0\", \"quantity\": 1 },\n * ]\n *\n * Creates an array in above format with the newQty (updated Qty ).\n *\n */\n\nexport var getUpdatedItems = function getUpdatedItems(products, newQty, cartKey) {\n  // Create an empty array.\n  var updatedItems = []; // Loop through the product array.\n\n  products.map(function (cartItem) {\n    // If you find the cart key of the product user is trying to update, push the key and new qty.\n    if (cartItem.cartKey === cartKey) {\n      updatedItems.push({\n        key: cartItem.cartKey,\n        quantity: parseInt(newQty)\n      }); // Otherwise just push the existing qty without updating.\n    } else {\n      updatedItems.push({\n        key: cartItem.cartKey,\n        quantity: cartItem.qty\n      });\n    }\n  }); // Return the updatedItems array with new Qtys.\n\n  return updatedItems;\n};"]}}